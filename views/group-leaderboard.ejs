<div class="container mt-5">
    <h1 class="text-center mb-4">Leaderboard by Age Range and Gender</h1>

    <% sortedGroups.forEach(group => { %>
        <!-- Extract age range and gender from groupKey -->
        <h2 class="text-center group-title">
            <%= group.groupKey.split('_')[0] %> - <%= group.groupKey.split('_')[1] %>
        </h2>

        <table class="table table-hover table-bordered shadow-sm">
            <thead class="table-dark">
                <tr class="smallerSize">
                    <th class="smallerSize" scope="col">#</th>
                    <th class="smallerSize" scope="col">Reader</th>
                    <th class="smallerSize" scope="col">Points</th>
                </tr>
            </thead>
            <tbody>
                <% group.readers.forEach(function(reader, index) { %>
                    <tr class="<%= index === 0 ? 'gold-row' : index === 1 ? 'silver-row' : index === 2 ? 'bronze-row' : '' %>">
                        <td class="smallerSize"><%= index + 1 %></td>
                        <td class="smallerSize theName">
                            <img src="/ml<%= reader.current_level_id ? reader.current_level_id : 1 %>.webp" alt="Level Image" 
                                 class="img-fluid rounded-circle" 
                                 style="height: 40px; width: 40px; margin-right: 10px;">
                            <%= reader.reader_name %>
                        </td>
                        <td class="smallerSize"><%= reader.total_points %></td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    <% }); %>

    <div class="text-center mt-4">
        <a href="/" class="btn btn-primary">Back to Home</a>
    </div>
    <div class="text-center mt-4">
        <a href="/family-leaderboard" class="btn btn-primary">Family Leaderboard</a>
    </div>
    <div class="text-center mt-4">
        <a href="/chapters-leaderboard" class="btn btn-primary">Chapters Leaderboard</a>
    </div>
</div>

<!-- Styles for gold, silver, and bronze rows -->
<style>
     /* General styling for tables */
     .table {
        border-collapse: collapse;
        margin-bottom: 1.5rem;
    }
    .table-hover tbody tr:hover {
        background-color: #f1f1f1;
    }
    .table-bordered {
        border: 1px solid #ddd;
    }
    .table-bordered td, .table-bordered th {
        border: 1px solid #ddd;
    }

    /* Group title styling */
    .group-title {
        background-color: #f8f9fa;
        padding: 15px;
        margin-bottom: 15px;
        border-radius: 8px;
        font-size: 1.5rem;
        text-transform: capitalize;
        font-weight: bold;
        color: #333;
    }

    /* Spacing between groups */
    .leaderboard-group {
        padding: 20px;
        background-color: #fff;
        border: 1px solid #ccc;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    /* Medal row styles */
    .gold-row {
        background-color: #FFD700 !important; /* Gold background */
        font-weight: bold;
    }
    .silver-row {
        background-color: #C0C0C0; /* Silver background */
        font-weight: bold;
    }
    .bronze-row {
        background-color: #CD7F32 !important; /* Bronze background */
        font-weight: bold;
    }

    /* Reader name and avatar */
    .theName {
        display: flex;
        align-items: center;
        font-size: 1.2em;
    }

    /* Buttons and links */
    .btn-primary {
        margin-top: 15px;
    }
    /* Table and row styles remain unchanged */
</style>
